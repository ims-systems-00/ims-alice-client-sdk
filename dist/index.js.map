{"version":3,"file":"index.js","sources":["../src/httpServices.js","../src/accountServices.js","../src/userServices.js","../src/ai/converstion.js","../src/chatService.js","../src/chatheadService.js","../src/fileHandlerService.js"],"sourcesContent":["import axios, { AxiosError } from \"axios\";\nconst HTTP_DEFAULT = axios.create({\n  withCredentials: true,\n});\nfunction setJwt(accessToken, refreshToken) {\n  HTTP_DEFAULT.defaults.headers.common[\"x-auth-accesstoken\"] = `${accessToken}`;\n  HTTP_DEFAULT.defaults.headers.common[\n    \"x-auth-refreshtoken\"\n  ] = `${refreshToken}`;\n}\nlet http = {\n  config: function (conf) {\n    HTTP_DEFAULT.defaults.baseURL =\n      conf?.baseURL ||\n      \"https://https://alice-server-prod.imssystems.tech\" + \"/api/v1\";\n  },\n  instance: HTTP_DEFAULT,\n  get: HTTP_DEFAULT.get,\n  post: HTTP_DEFAULT.post,\n  put: HTTP_DEFAULT.put,\n  patch: HTTP_DEFAULT.patch,\n  delete: HTTP_DEFAULT.delete,\n  setJwt,\n  HTTPError: AxiosError,\n};\nexport default http;\n","import http from \"./httpServices\";\nconst apiEndPoint = `/accounts`;\nexport async function login(data) {\n  return http.post(apiEndPoint + \"/auth/login\", {\n    email: data.email,\n    password: data.password,\n  });\n}\nexport async function registerAccount(data = { email, name, password }) {\n  await http.post(apiEndPoint + \"/registration\", {\n    name: data.name,\n    email: data.email,\n    password: data.password,\n  });\n  /** we are auto loging user in with same password for better UX */\n  return login(data);\n}\nexport async function verifyRegistration({ token }) {\n  return http.post(\n    apiEndPoint + \"/registration/verification\",\n    {},\n    {\n      headers: { \"x-register-token\": token },\n    }\n  );\n}\nexport async function resendVerification(data = { userId }) {\n  return http.post(apiEndPoint + \"/registration/verification/emails\", {\n    userId: data.userId,\n  });\n}\nexport async function recoverAccount(data = { email }) {\n  return http.post(apiEndPoint + \"/recovery\", {\n    email: data.email,\n  });\n}\nexport async function verifyRecovery(\n  data = {\n    password,\n    token,\n  }\n) {\n  return http.post(\n    apiEndPoint + \"/recovery/verification\",\n    {\n      password: data.password,\n    },\n    {\n      headers: { \"x-recovery-token\": data.token },\n    }\n  );\n}\nexport async function refreshToken(data) {\n  return http.get(apiEndPoint + \"/auth/refresh-token\");\n}\nexport async function logout() {\n  return http.delete(apiEndPoint + \"/auth/logout\");\n}\n","import http from \"./httpServices\";\nconst apiEndPoint = `/users`;\nexport function getUserInfo(id) {\n  return http.get(`${apiEndPoint}/${id}`);\n}\nexport function updateUserProfile(id, data) {\n  return http.put(`${apiEndPoint}/${id}`, {\n    name: data.name,\n    organisationName: data.organisationName,\n    jobTitle: data.jobTitle,\n  });\n}\nexport function updateUserProfileImage(id, data) {\n  return http.put(`${apiEndPoint}/${id}/profile-image`, {\n    ...data,\n  });\n}\nexport function updateUserActivityStatus(id, data) {\n  return http.put(`${apiEndPoint}/${id}/activity-status`, {\n    ...data,\n  });\n}\nexport function updateUserPassword(id, data) {\n  return http.post(`${apiEndPoint}/${id}/change-password`, {\n    oldPassword: data.oldPassword,\n    password: data.password,\n  });\n}\n","import http from \"../httpServices\";\nconst apiEndPoint = `/conversation`;\nconst DEFAULT_PROMT = {\n  role: \"system\",\n  content: `You are an AI assistant named Alice. Always generate all your response in a markdown (don't wrap in code blocks only wrap in codeblock if it's some code or diagram) format. \n  Always comprehend your answers when asked for any documentation or policies. Make sure you give \n  language name in codeblocks markdown and never miss it. If you are asked to make or build \n  or prepare or construct charts or diagrams use mermaid js syntex for the charts and diagrams \n  and always include it codeblock markdown. Also try to explain or comprehend your general \n  answers with details as much as possible. Use UK english in your reseponses.`,\n};\n/**\n * ALERT: We should not user fetch with any other cases unless it's a\n * special case like this where axios does'nt have support for stream response\n * in browsers. limited  by XMLHTTPRequest  standards.\n */\nexport async function streamResponse(\n  data,\n  options = {\n    onStream: function () {},\n    onStreamEnd: function () {},\n    onError: function () {},\n    onTokenRefreshNeed: async function () {},\n    headers: {},\n  }\n) {\n  console.log(\n    \"sending charecters:\",\n    data.conversation.reduce((accumulator, currentValue) => {\n      return currentValue.content + accumulator;\n    }, \"\").length\n  );\n  console.log(\n    \"sending charecters trim:\",\n    data.conversation.reduce((accumulator, currentValue) => {\n      return currentValue.content + accumulator.trim();\n    }, \"\").length\n  );\n\n  async function _successResponseHandler(response) {\n    const reader = response.body.getReader();\n    let fullText = \"\";\n    while (true) {\n      try {\n        const { value, done } = await reader.read();\n        if (done) break;\n        const decodedtext = new TextDecoder(\"utf-8\").decode(value);\n        fullText += decodedtext;\n        options?.onStream(decodedtext);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    options?.onStreamEnd(fullText);\n  }\n  try {\n    const URL =\n      process.env.REACT_APP_API_URL +\n      process.env.REACT_APP_API_VERSION +\n      `${apiEndPoint}/gpt-stream`;\n    const config = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options?.headers || {}),\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        systemInstructions: data.systemInstructions || [DEFAULT_PROMT],\n        conversation: data.conversation,\n        prompt: data.prompt,\n      }),\n    };\n    const response = await fetch(URL, config);\n    if (response.ok) {\n      _successResponseHandler(response);\n    } else {\n      if (response.status === 401) {\n        const data = await options?.onTokenRefreshNeed();\n        const tokenPair = data?.tokenPair;\n        try {\n          let newResponse = await fetch(URL, {\n            ...config,\n            headers: {\n              ...config.headers,\n              \"x-auth-accesstoken\": tokenPair?.accessToken,\n            },\n          });\n          if (newResponse.ok) {\n            _successResponseHandler(newResponse);\n          }\n        } catch (err) {\n          options?.onError(err);\n        }\n      }\n    }\n  } catch (err) {\n    options?.onError(err);\n  }\n}\n\nexport async function normalResponse(data) {\n  return http.post(`${apiEndPoint}/gpt-normal`, {\n    systemInstructions: data.systemInstructions || [DEFAULT_PROMT],\n    conversation: data.conversation,\n    prompt: data.prompt,\n  });\n}\n","import http from \"./httpServices\";\nconst apiEndPoint = `/chats`;\nexport function createChat(data) {\n  return http.post(`${apiEndPoint}/`, {\n    chathead: data.chathead,\n    prompt: data.prompt,\n    response: data.response,\n  });\n}\nexport function updateChat(dataId, data) {\n  return http.put(`${apiEndPoint}/${dataId}/`, {\n    name: data.name,\n    description: data.description,\n  });\n}\nexport function reactOnChat(dataId, data) {\n  return http.put(`${apiEndPoint}/${dataId}/reactions`, {\n    reaction: data.reaction,\n  });\n}\nexport function listChats(query) {\n  return http.get(`${apiEndPoint}/?${query || \"\"}`);\n}\nexport function getChat(dataId) {\n  return http.get(`${apiEndPoint}/${dataId}`);\n}\nexport function hardDeleteChat(dataId) {\n  return http.delete(`${apiEndPoint}/${dataId}/hard`);\n}\n","import http from \"./httpServices\";\nconst apiEndPoint = `/chatheads`;\nexport function createChatead(data) {\n  return http.post(`${apiEndPoint}/`, {\n    name: data.name,\n    description: data.description || \"\",\n  });\n}\nexport function updateChathead(dataId, data) {\n  return http.put(`${apiEndPoint}/${dataId}/`, {\n    name: data.name,\n    description: data.description,\n  });\n}\nexport function listChateads(query) {\n  return http.get(`${apiEndPoint}/?${query || \"\"}`);\n}\nexport function getChatead(dataId) {\n  return http.get(`${apiEndPoint}/${dataId}`);\n}\nexport function hardDeleteChatead(dataId) {\n  return http.delete(`${apiEndPoint}/${dataId}/hard`);\n}\n","import http from \"./httpServices\";\nimport moment from \"moment\";\nconst apiEndPoint = `/file-manager`;\nmoment().format();\nexport function downloader(fileName, data) {\n  const downloadUrl = window.URL.createObjectURL(new Blob([data]));\n  const link = document.createElement(\"a\");\n  link.href = downloadUrl;\n  link.setAttribute(\"download\", fileName);\n  document.body.appendChild(link);\n  link.click();\n  link.remove();\n}\n\nexport async function uploadFileToS3(file, config) {\n  try {\n    let { data } = await http.get(`${apiEndPoint}/upload-url`, {\n      headers: {\n        \"x-file-name\": file.name,\n      },\n    });\n    let uploadResponse = await http.put(data?.details?.uploadUrl, file, config);\n    uploadResponse.data = { ...data };\n    return uploadResponse;\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport async function downloadFile(attachment) {\n  try {\n    const fileName = attachment?.Name || attachment?.Key?.split(\"/\")[1];\n    const { data } = await http.get(`${apiEndPoint}/signed-url`, {\n      headers: {\n        \"x-file-name\": fileName,\n        \"x-file-key\": attachment?.Key || attachment?.key,\n        \"x-file-version\": null,\n        \"x-file-bucket\": attachment?.Bucket,\n      },\n    });\n    const link = document.createElement(\"a\");\n    link.href = data.url;\n    link.target = \"_blank\";\n    link.rel = \"noopener\";\n    link.setAttribute(\"download\", fileName);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  } catch (ex) {}\n}\n"],"names":["HTTP_DEFAULT","axios","create","withCredentials","http","config","conf","defaults","baseURL","instance","get","post","put","patch","delete","setJwt","accessToken","refreshToken","headers","common","HTTPError","AxiosError","login","data","Promise","resolve","apiEndPoint","email","password","e","reject","_catch","body","recover","result","then","_settle","pact","state","value","s","_Pact","o","bind","v","observer","prototype","onFulfilled","onRejected","this","callback","_this","_isSettledPact","thenable","DEFAULT_PROMT","role","content","moment","format","chathead","prompt","response","name","description","attachment","_temp","_attachment$Key","fileName","Name","Key","split","key","Bucket","_ref2","link","document","createElement","href","url","target","rel","setAttribute","appendChild","click","remove","downloadUrl","window","URL","createObjectURL","Blob","dataId","id","query","systemInstructions","conversation","reaction","undefined","userId","options","onStream","onStreamEnd","onError","onTokenRefreshNeed","_successResponseHandler","_interrupt","_temp7","_options","fullText","reader","getReader","_temp6","test","update","stage","shouldContinue","updateValue","_resumeAfterTest","_resumeAfterBody","_resumeAfterUpdate","_for","_temp5","read","_ref","_options2","done","decodedtext","TextDecoder","decode","err","console","log","reduce","accumulator","currentValue","length","trim","_temp4","_options3","process","env","REACT_APP_API_URL","REACT_APP_API_VERSION","method","_extends","credentials","JSON","stringify","fetch","_temp3","ok","_temp2","_options4","status","tokenPair","newResponse","_options5","_options6","oldPassword","organisationName","jobTitle","file","_data$details","details","uploadUrl","uploadResponse","token"],"mappings":"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"}